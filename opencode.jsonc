{
  "$schema": "https://opencode.ai/config.json",
  
  // === Models ===
  "model": "anthropic/claude-opus-4-5",
  "small_model": "anthropic/claude-haiku-4-5",  // title gen, lightweight tasks
  "autoupdate": true,
  
  // === TUI ===
  "tui": {
    "scroll_acceleration": {
      "enabled": true  // macOS-style momentum scrolling
    }
  },
  
  // === Formatters ===
  // Swift formatting handled by Xcode / swift-format in project configs
  
  // === Instructions ===
  // AGENTS.md auto-loaded from ~/.config/opencode/ and repo root
  // Knowledge files (knowledge/*.md) are loaded on-demand via @path references
  
  // === Permissions ===
  "permission": {
    // .env reads without prompts
    "read": {
      ".env": "allow",
      ".env.*": "allow",
      ".env-*": "allow"
    },
    "external_directory": "allow",
    // Only deny the truly catastrophic - everything else just runs
    "bash": {
      "sudo *": "deny",
      "rm -rf /": "deny",
      "rm -rf /*": "deny",
      "rm -rf ~": "deny",
      "rm -rf ~/*": "deny",
      ":(){:|:&};:": "deny"  // fork bomb, just in case
    }
  },

  // === MCP Servers ===
  "mcp": {
    "agent-mail": {
      "type": "remote",
      "url": "http://127.0.0.1:8765/mcp/",
      "headers": {
        "Authorization": "Bearer 422b429ed87ec88e7cfe258b3ddee9eb9afe2adcf62ae1a5d4c89269ae1c9a90"
      }
    },
    // Docs lookup for libraries - https://context7.com
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp"
    },
    // Web fetching - MCP official server (Python via uvx)
    "fetch": {
      "type": "local",
      "command": ["uvx", "mcp-server-fetch"]
    },
    // RepoPrompt - repo context generation
    "RepoPrompt": {
      "type": "local",
      "command": ["/Users/dalecarman/RepoPrompt/repoprompt_cli"]
    }
  },
  
  // === Agent Overrides ===
  "agent": {
    // Build agent - full capability with slight creativity
    "build": {
      "temperature": 0.3
    },
    // Plan agent - read-only analysis, no file writes
    "plan": {
      "model": "anthropic/claude-sonnet-4-5",  // Sonnet for planning (cheaper)
      "temperature": 0.1,
      "tools": {
        "write": false,
        "edit": false,
        "patch": false
      },
      "permission": {
        "bash": {
          "git status": "allow",
          "git diff*": "allow",
          "git log*": "allow",
          "git show*": "allow",
          "bd *": "allow",
          "rg *": "allow",
          "tree *": "allow",
          "wc *": "allow",
          "head *": "allow",
          "tail *": "allow",
          "swift build*": "allow",
          "swift test*": "allow",
          "xcodebuild *": "allow",
          "xcrun *": "allow",
          // xcode-cli-tools wrapper scripts
          "\"/Users/dalecarman/Groove Jones Dropbox/Dale Carman/Projects/dev/xcode-cli-tools/.claude/scripts/\"*": "allow",
          "*": "deny"
        }
      }
    },
    // Docs agent - documentation writer (cheaper model)
    "docs": {
      "model": "anthropic/claude-haiku-4-5",  // Haiku for cost-effective docs
      "temperature": 0.3,  // More creativity for readable documentation
      "permission": {
        "write": {
          "**/*.md": "allow",
          "**/*.mdx": "allow",
          "*": "deny"
        }
      },
      "description": "Documentation writer - generates and updates markdown docs, READMEs, and guides. Can only write to .md/.mdx files."
    }
  }
}
